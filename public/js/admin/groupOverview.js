!function(t){function e(n){if(a[n])return a[n].exports;var i=a[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var a={};e.m=t,e.c=a,e.d=function(t,a,n){e.o(t,a)||Object.defineProperty(t,a,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,"a",a),a},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=100)}({100:function(t,e,a){t.exports=a(101)},101:function(t,e){new Vue({el:"#group-travelers-app",data:{trips:"",group:groupLoaded,depart:groupDepart,admin:adminLoaded,method:"Payment",today:"",paymentValid:!1,paymentType:"discount",payment:{traveler:"",user:"",method:"",paypal_id:"admin-"+Date.now(),user_id:"",trip_id:"",amount:"0.00",fee:0,balance:"",balanceIn:""}},methods:{resetData:function(){this.payment={traveler:"",user:"",method:"",paypal_id:"",user_id:"",trip_id:"",amount:"0.00",fee:0,balance:"",balanceIn:"",created_at:""}},adminPayment:function(t){fadeIn("#poverlay"),fadeIn("#payment-modal"),this.updatePayment(),this.payment.balanceIn=this.trips[t].total-this.trips[t].paid,this.payment.balance=this.formatCurrency(this.payment.balanceIn),this.payment.amount="0.00",this.payment.paypal_id="admin-"+Date.now(),this.payment.traveler=this.trips[t].traveler,this.payment.traveler_id=this.trips[t].traveler.id,this.payment.user=this.trips[t].user,this.payment.user_id=this.trips[t].user.id,this.payment.trip_id=this.trips[t].id,this.createToday(),this.formatCreated(this.today)},updatePayment:function(){this.payment.balance=this.payment.balanceIn-this.payment.amount,this.payment.amount>this.payment.balanceIn&&(this.payment.balance=0,this.payment.amount=this.payment.balanceIn),this.checkPayment()},selectDiscount:function(){this.method="Discount"},selectPayment:function(){this.method="Payment"},updateDate:function(){this.formatCreated($("#payment-date").val()),this.checkPayment()},checkPayment:function(){this.payment.amount>0&&""!=this.payment.method?this.paymentValid=!0:this.paymentValid=!1},processPayment:function(){var t="/payments/store",e=this;"Discount"==this.method&&(t="/payments/discount"),$.ajax({type:"POST",url:t,data:{payment:e.payment},success:function(t){"SUCCESS"==JSON.parse(t).status&&window.location.reload()}})},formatCurrency:function(t){return parseFloat(Math.round(100*t)/100).toFixed(2)},closePayment:function(){fadeOut("#poverlay"),fadeOut("#payment-modal"),this.resetData()},createToday:function(){today=new Date,dd=today.getDate(),dd<10&&(dd="0"+dd),mm=today.getMonth()+1,mm<10&&(mm="0"+mm),yy=today.getFullYear(),this.today=mm+"/"+dd+"/"+yy},formatCreated:function(t){var e=t.split("/");this.payment.created_at=e[2]+"-"+e[0]+"-"+e[1]+" 00:00:00"},toggleActive:function(t){var e=this.trips[t].active;0==e&&(this.trips[t].active=1),1==e&&(this.trips[t].active=0);var a=this.trips[t];$.ajax({type:"POST",url:"/trips/toggleActive",data:{id:a.id,active:a.active},success:function(t){a.active=t}})}},mounted:function(){var t=JSON.stringify(tripsLoaded);this.trips=JSON.parse(t),this.resetData(),$("#payment-date").datepicker({uiLibrary:"bootstrap4",iconsLibrary:"fontawesome"});var e=this;$("#payment-date").change(function(){e.updateDate()}),$("#payment-date").attr("readonly","readonly"),$("#payment-date").css("background","white")},components:{},computed:{remainingBalance:function(){return this.formatCurrency(this.payment.balance)}}})}});